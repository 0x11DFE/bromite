From: csagan5 <32685696+csagan5@users.noreply.github.com>
Date: Fri, 15 Mar 2019 10:05:14 +0100
Subject: Enable secure DNS mode by default in DnsTransaction

---
 net/dns/host_resolver_manager.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/net/dns/host_resolver_manager.cc b/net/dns/host_resolver_manager.cc
--- a/net/dns/host_resolver_manager.cc
+++ b/net/dns/host_resolver_manager.cc
@@ -1001,7 +1001,7 @@ class HostResolverManager::DnsTask : public base::SupportsWeakPtr<DnsTask> {
   std::unique_ptr<DnsTransaction> CreateTransaction(
       DnsQueryType dns_query_type) {
     DCHECK_NE(DnsQueryType::UNSPECIFIED, dns_query_type);
-    SecureDnsMode secure_dns_mode = SecureDnsMode::AUTOMATIC;
+    SecureDnsMode secure_dns_mode = SecureDnsMode::SECURE;
     // Downgrade to OFF mode if the query name for this attempt matches one of
     // the DoH server names. This is needed to prevent infinite recursion.
     DCHECK(client_->GetConfig());
-- 
2.11.0

